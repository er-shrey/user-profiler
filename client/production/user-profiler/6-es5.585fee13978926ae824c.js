function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,n,t){return n&&_defineProperties(e.prototype,n),t&&_defineProperties(e,t),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{cRhG:function(e,n,t){"use strict";t.r(n),t.d(n,"ProfileModule",(function(){return R}));var r,i=t("ofXK"),o=t("tyNb"),a=t("3Pt+"),s=t("fXoL"),f=t("tk/3"),b=((r=function(){function e(n){_classCallCheck(this,e),this.http=n}return _createClass(e,[{key:"postRequest",value:function(e,n){return n||(n=[]),this.http.post(e,n)}},{key:"getRequest",value:function(e,n){return n||(n=[]),this.http.get(e,n)}},{key:"patchRequest",value:function(e,n){return n||(n=[]),this.http.patch(e,n)}},{key:"deleteRequest",value:function(e,n){return n||(n=[]),this.http.delete(e,n)}}]),e}()).\u0275fac=function(e){return new(e||r)(s.Qb(f.a))},r.\u0275prov=s.Fb({token:r,factory:r.\u0275fac,providedIn:"root"}),r);function c(e,n){1&e&&s.Kb(0,"div")}function u(e,n){if(1&e&&(s.Mb(0,"div",4),s.fc(1),s.Mb(2,"span",5),s.fc(3),s.Lb(),s.Lb()),2&e){var t=s.Wb();s.zb(1),s.gc(" ",t.errorMessage," "),s.zb(2),s.gc("Redirecting to Home in... ",t.seconds," Seconds")}}function l(e,n){1&e&&(s.Mb(0,"span"),s.fc(1,"Email is required"),s.Lb())}function p(e,n){1&e&&(s.Mb(0,"span"),s.fc(1,"Email is invalid"),s.Lb())}function d(e,n){if(1&e&&(s.Mb(0,"span",21),s.dc(1,l,2,0,"span",22),s.dc(2,p,2,0,"span",22),s.Lb()),2&e){var t=s.Wb(2);s.zb(1),s.Xb("ngIf",t.email.errors.required),s.zb(1),s.Xb("ngIf",t.email.errors.email)}}function m(e,n){1&e&&(s.Mb(0,"span"),s.fc(1,"Firstname is required"),s.Lb())}function h(e,n){if(1&e&&(s.Mb(0,"span",21),s.dc(1,m,2,0,"span",22),s.Lb()),2&e){var t=s.Wb(2);s.zb(1),s.Xb("ngIf",t.firstname.errors.required)}}function g(e,n){1&e&&(s.Mb(0,"span"),s.fc(1,"Lastname is required"),s.Lb())}function v(e,n){if(1&e&&(s.Mb(0,"span",21),s.dc(1,g,2,0,"span",22),s.Lb()),2&e){var t=s.Wb(2);s.zb(1),s.Xb("ngIf",t.lastname.errors.required)}}function M(e,n){1&e&&(s.Mb(0,"span"),s.fc(1,"Phone is required"),s.Lb())}function y(e,n){1&e&&(s.Mb(0,"span"),s.fc(1,"Phone number should not be less then 10 digits"),s.Lb())}function L(e,n){1&e&&(s.Mb(0,"span"),s.fc(1,"Only numbers are allowed"),s.Lb())}function k(e,n){if(1&e&&(s.Mb(0,"span",21),s.dc(1,M,2,0,"span",22),s.dc(2,y,2,0,"span",22),s.dc(3,L,2,0,"span",22),s.Lb()),2&e){var t=s.Wb(2);s.zb(1),s.Xb("ngIf",t.phone.errors.required),s.zb(1),s.Xb("ngIf",t.phone.errors.minlength),s.zb(1),s.Xb("ngIf",t.phone.errors.pattern)}}function I(e,n){1&e&&(s.Mb(0,"span"),s.fc(1,"Date of birth is required"),s.Lb())}function w(e,n){if(1&e&&(s.Mb(0,"span",21),s.dc(1,I,2,0,"span",22),s.Lb()),2&e){var t=s.Wb(2);s.zb(1),s.Xb("ngIf",t.dob.errors.required)}}function q(e,n){1&e&&(s.Mb(0,"span",21),s.fc(1," All fields are required "),s.Lb())}function C(e,n){if(1&e){var t=s.Nb();s.Mb(0,"div",6),s.Mb(1,"form",7),s.Ub("ngSubmit",(function(){return s.ac(t),s.Wb().updateProfile()})),s.Mb(2,"div",8),s.Mb(3,"label",9),s.fc(4,"Email"),s.Lb(),s.dc(5,d,3,2,"span",10),s.Kb(6,"input",11),s.Lb(),s.Mb(7,"div",8),s.Mb(8,"label",12),s.fc(9,"First Name"),s.Lb(),s.dc(10,h,2,1,"span",10),s.Kb(11,"input",13),s.Lb(),s.Mb(12,"div",8),s.Mb(13,"label",14),s.fc(14,"Last Name"),s.Lb(),s.dc(15,v,2,1,"span",10),s.Kb(16,"input",15),s.Lb(),s.Mb(17,"div",8),s.Mb(18,"label",16),s.fc(19,"Phone"),s.Lb(),s.dc(20,k,4,3,"span",10),s.Kb(21,"input",17),s.Lb(),s.Mb(22,"div",8),s.Mb(23,"label",18),s.fc(24,"Date of Birth"),s.Lb(),s.dc(25,w,2,1,"span",10),s.Kb(26,"input",19),s.Lb(),s.Mb(27,"button",20),s.fc(28,"Update"),s.Lb(),s.dc(29,q,2,0,"span",10),s.Lb(),s.Lb()}if(2&e){var r=s.Wb();s.zb(1),s.Xb("formGroup",r.profileForm),s.zb(4),s.Xb("ngIf",r.email.touched&&r.email.invalid),s.zb(5),s.Xb("ngIf",r.firstname.touched&&r.firstname.invalid),s.zb(5),s.Xb("ngIf",r.lastname.touched&&r.lastname.invalid),s.zb(5),s.Xb("ngIf",r.phone.touched&&r.phone.invalid),s.zb(5),s.Xb("ngIf",r.dob.touched&&r.dob.invalid),s.zb(4),s.Xb("ngIf",r.profileForm.touched&&r.profileForm.invalid)}}var z,X,_,F,j=[{path:"",component:(z=function(){function e(n,t,r){_classCallCheck(this,e),this.route=n,this.router=t,this.requests=r,this.seconds=5,this.profileForm=new a.d({email:new a.b("",[a.j.required,a.j.email]),firstname:new a.b("",a.j.required),lastname:new a.b("",a.j.required),phone:new a.b("",[a.j.required,a.j.pattern("^[0-9]*$"),a.j.minLength(10)]),dob:new a.b("",a.j.required)})}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.route.params.subscribe((function(n){e.getUserDetail(n.token)}))}},{key:"getUserDetail",value:function(e){var n=this;this.errorMessage="",this.user_id="",this.requests.getRequest("/api/get-token-user/"+e).subscribe((function(e){e.message?n.showMessage(e.message):(n.profileForm.setValue({email:e.email,firstname:e.firstname,lastname:e.lastname,phone:e.phone,dob:new Date(e.dob).toISOString().substring(0,10)}),n.user_id=e.user_id)}))}},{key:"updateProfile",value:function(){var e=this;this.profileForm.valid&&this.requests.patchRequest("/api/users/"+this.user_id,this.profileForm.value).subscribe((function(n){e.showMessage(n.message?n.message:"Successfully Updated")}))}},{key:"showMessage",value:function(e){var n=this;this.errorMessage=e;var t=setInterval((function(){n.seconds--,0==n.seconds&&(clearInterval(t),n.router.navigate(["/home"]))}),1e3)}},{key:"email",get:function(){return this.profileForm.get("email")}},{key:"firstname",get:function(){return this.profileForm.get("firstname")}},{key:"lastname",get:function(){return this.profileForm.get("lastname")}},{key:"phone",get:function(){return this.profileForm.get("phone")}},{key:"dob",get:function(){return this.profileForm.get("dob")}}]),e}(),z.\u0275fac=function(e){return new(e||z)(s.Jb(o.a),s.Jb(o.b),s.Jb(b))},z.\u0275cmp=s.Db({type:z,selectors:[["app-profile"]],decls:6,vars:3,consts:[[1,"container"],[4,"ngIf","ngIfThen","ngIfElse"],["errorBlock",""],["formBlock",""],[1,"alert","alert-warning","m-5"],[1,"float-right"],[1,"d-flex","m-3","justify-content-center"],[1,"col-lg-6","col-sm-12",3,"formGroup","ngSubmit"],[1,"form-group"],["for","useremail"],["class","float-right text-danger",4,"ngIf"],["type","email","id","useremail","formControlName","email",1,"form-control"],["for","firstName"],["type","text","id","firstName","formControlName","firstname",1,"form-control"],["for","lastName"],["type","text","id","lastName","formControlName","lastname",1,"form-control"],["for","phone"],["type","text","id","phone","formControlName","phone",1,"form-control"],["for","dob"],["type","date","id","dob","formControlName","dob",1,"form-control"],["type","submit",1,"btn","btn-primary"],[1,"float-right","text-danger"],[4,"ngIf"]],template:function(e,n){if(1&e&&(s.Mb(0,"div",0),s.dc(1,c,1,0,"div",1),s.dc(2,u,4,2,"ng-template",null,2,s.ec),s.dc(4,C,30,7,"ng-template",null,3,s.ec),s.Lb()),2&e){var t=s.Zb(3),r=s.Zb(5);s.zb(1),s.Xb("ngIf",n.errorMessage)("ngIfThen",t)("ngIfElse",r)}},directives:[i.h,a.k,a.h,a.e,a.a,a.g,a.c],styles:[""]}),z)}],N=((F=function e(){_classCallCheck(this,e)}).\u0275mod=s.Hb({type:F}),F.\u0275inj=s.Gb({factory:function(e){return new(e||F)},imports:[[o.e.forChild(j)],o.e]}),F),P=((_=function e(){_classCallCheck(this,e)}).\u0275mod=s.Hb({type:_}),_.\u0275inj=s.Gb({factory:function(e){return new(e||_)},providers:[b],imports:[[i.b,f.b,a.f,a.i]]}),_),R=((X=function e(){_classCallCheck(this,e)}).\u0275mod=s.Hb({type:X}),X.\u0275inj=s.Gb({factory:function(e){return new(e||X)},imports:[[i.b,N,P,a.f,a.i]]}),X)}}]);