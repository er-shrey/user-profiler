(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{cRhG:function(e,t,n){"use strict";n.r(t),n.d(t,"ProfileModule",(function(){return j}));var r=n("ofXK"),s=n("tyNb"),i=n("3Pt+"),o=n("fXoL"),a=n("tk/3");let b=(()=>{class e{constructor(e){this.http=e}postRequest(e,t){return t||(t=[]),this.http.post(e,t)}getRequest(e,t){return t||(t=[]),this.http.get(e,t)}patchRequest(e,t){return t||(t=[]),this.http.patch(e,t)}deleteRequest(e,t){return t||(t=[]),this.http.delete(e,t)}}return e.\u0275fac=function(t){return new(t||e)(o.Qb(a.a))},e.\u0275prov=o.Fb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function f(e,t){1&e&&o.Kb(0,"div")}function c(e,t){if(1&e&&(o.Mb(0,"div",4),o.fc(1),o.Mb(2,"span",5),o.fc(3),o.Lb(),o.Lb()),2&e){const e=o.Wb();o.zb(1),o.gc(" ",e.errorMessage," "),o.zb(2),o.gc("Redirecting to Home in... ",e.seconds," Seconds")}}function l(e,t){1&e&&(o.Mb(0,"span"),o.fc(1,"Email is required"),o.Lb())}function u(e,t){1&e&&(o.Mb(0,"span"),o.fc(1,"Email is invalid"),o.Lb())}function d(e,t){if(1&e&&(o.Mb(0,"span",21),o.dc(1,l,2,0,"span",22),o.dc(2,u,2,0,"span",22),o.Lb()),2&e){const e=o.Wb(2);o.zb(1),o.Xb("ngIf",e.email.errors.required),o.zb(1),o.Xb("ngIf",e.email.errors.email)}}function p(e,t){1&e&&(o.Mb(0,"span"),o.fc(1,"Firstname is required"),o.Lb())}function m(e,t){if(1&e&&(o.Mb(0,"span",21),o.dc(1,p,2,0,"span",22),o.Lb()),2&e){const e=o.Wb(2);o.zb(1),o.Xb("ngIf",e.firstname.errors.required)}}function h(e,t){1&e&&(o.Mb(0,"span"),o.fc(1,"Lastname is required"),o.Lb())}function g(e,t){if(1&e&&(o.Mb(0,"span",21),o.dc(1,h,2,0,"span",22),o.Lb()),2&e){const e=o.Wb(2);o.zb(1),o.Xb("ngIf",e.lastname.errors.required)}}function M(e,t){1&e&&(o.Mb(0,"span"),o.fc(1,"Phone is required"),o.Lb())}function L(e,t){1&e&&(o.Mb(0,"span"),o.fc(1,"Phone number should not be less then 10 digits"),o.Lb())}function v(e,t){1&e&&(o.Mb(0,"span"),o.fc(1,"Only numbers are allowed"),o.Lb())}function I(e,t){if(1&e&&(o.Mb(0,"span",21),o.dc(1,M,2,0,"span",22),o.dc(2,L,2,0,"span",22),o.dc(3,v,2,0,"span",22),o.Lb()),2&e){const e=o.Wb(2);o.zb(1),o.Xb("ngIf",e.phone.errors.required),o.zb(1),o.Xb("ngIf",e.phone.errors.minlength),o.zb(1),o.Xb("ngIf",e.phone.errors.pattern)}}function q(e,t){1&e&&(o.Mb(0,"span"),o.fc(1,"Date of birth is required"),o.Lb())}function w(e,t){if(1&e&&(o.Mb(0,"span",21),o.dc(1,q,2,0,"span",22),o.Lb()),2&e){const e=o.Wb(2);o.zb(1),o.Xb("ngIf",e.dob.errors.required)}}function y(e,t){1&e&&(o.Mb(0,"span",21),o.fc(1," All fields are required "),o.Lb())}function z(e,t){if(1&e){const e=o.Nb();o.Mb(0,"div",6),o.Mb(1,"form",7),o.Ub("ngSubmit",(function(){return o.ac(e),o.Wb().updateProfile()})),o.Mb(2,"div",8),o.Mb(3,"label",9),o.fc(4,"Email"),o.Lb(),o.dc(5,d,3,2,"span",10),o.Kb(6,"input",11),o.Lb(),o.Mb(7,"div",8),o.Mb(8,"label",12),o.fc(9,"First Name"),o.Lb(),o.dc(10,m,2,1,"span",10),o.Kb(11,"input",13),o.Lb(),o.Mb(12,"div",8),o.Mb(13,"label",14),o.fc(14,"Last Name"),o.Lb(),o.dc(15,g,2,1,"span",10),o.Kb(16,"input",15),o.Lb(),o.Mb(17,"div",8),o.Mb(18,"label",16),o.fc(19,"Phone"),o.Lb(),o.dc(20,I,4,3,"span",10),o.Kb(21,"input",17),o.Lb(),o.Mb(22,"div",8),o.Mb(23,"label",18),o.fc(24,"Date of Birth"),o.Lb(),o.dc(25,w,2,1,"span",10),o.Kb(26,"input",19),o.Lb(),o.Mb(27,"button",20),o.fc(28,"Update"),o.Lb(),o.dc(29,y,2,0,"span",10),o.Lb(),o.Lb()}if(2&e){const e=o.Wb();o.zb(1),o.Xb("formGroup",e.profileForm),o.zb(4),o.Xb("ngIf",e.email.touched&&e.email.invalid),o.zb(5),o.Xb("ngIf",e.firstname.touched&&e.firstname.invalid),o.zb(5),o.Xb("ngIf",e.lastname.touched&&e.lastname.invalid),o.zb(5),o.Xb("ngIf",e.phone.touched&&e.phone.invalid),o.zb(5),o.Xb("ngIf",e.dob.touched&&e.dob.invalid),o.zb(4),o.Xb("ngIf",e.profileForm.touched&&e.profileForm.invalid)}}const X=[{path:"",component:(()=>{class e{constructor(e,t,n){this.route=e,this.router=t,this.requests=n,this.seconds=5,this.profileForm=new i.d({email:new i.b("",[i.j.required,i.j.email]),firstname:new i.b("",i.j.required),lastname:new i.b("",i.j.required),phone:new i.b("",[i.j.required,i.j.pattern("^[0-9]*$"),i.j.minLength(10)]),dob:new i.b("",i.j.required)})}get email(){return this.profileForm.get("email")}get firstname(){return this.profileForm.get("firstname")}get lastname(){return this.profileForm.get("lastname")}get phone(){return this.profileForm.get("phone")}get dob(){return this.profileForm.get("dob")}ngOnInit(){this.route.params.subscribe(e=>{this.getUserDetail(e.token)})}getUserDetail(e){this.errorMessage="",this.user_id="",this.requests.getRequest("/api/get-token-user/"+e).subscribe(e=>{e.message?this.showMessage(e.message):(this.profileForm.setValue({email:e.email,firstname:e.firstname,lastname:e.lastname,phone:e.phone,dob:new Date(e.dob).toISOString().substring(0,10)}),this.user_id=e.user_id)})}updateProfile(){this.profileForm.valid&&this.requests.patchRequest("/api/users/"+this.user_id,this.profileForm.value).subscribe(e=>{this.showMessage(e.message?e.message:"Successfully Updated")})}showMessage(e){this.errorMessage=e;var t=setInterval(()=>{this.seconds--,0==this.seconds&&(clearInterval(t),this.router.navigate(["/home"]))},1e3)}}return e.\u0275fac=function(t){return new(t||e)(o.Jb(s.a),o.Jb(s.b),o.Jb(b))},e.\u0275cmp=o.Db({type:e,selectors:[["app-profile"]],decls:6,vars:3,consts:[[1,"container"],[4,"ngIf","ngIfThen","ngIfElse"],["errorBlock",""],["formBlock",""],[1,"alert","alert-warning","m-5"],[1,"float-right"],[1,"d-flex","m-3","justify-content-center"],[1,"col-lg-6","col-sm-12",3,"formGroup","ngSubmit"],[1,"form-group"],["for","useremail"],["class","float-right text-danger",4,"ngIf"],["type","email","id","useremail","formControlName","email",1,"form-control"],["for","firstName"],["type","text","id","firstName","formControlName","firstname",1,"form-control"],["for","lastName"],["type","text","id","lastName","formControlName","lastname",1,"form-control"],["for","phone"],["type","text","id","phone","formControlName","phone",1,"form-control"],["for","dob"],["type","date","id","dob","formControlName","dob",1,"form-control"],["type","submit",1,"btn","btn-primary"],[1,"float-right","text-danger"],[4,"ngIf"]],template:function(e,t){if(1&e&&(o.Mb(0,"div",0),o.dc(1,f,1,0,"div",1),o.dc(2,c,4,2,"ng-template",null,2,o.ec),o.dc(4,z,30,7,"ng-template",null,3,o.ec),o.Lb()),2&e){const e=o.Zb(3),n=o.Zb(5);o.zb(1),o.Xb("ngIf",t.errorMessage)("ngIfThen",e)("ngIfElse",n)}},directives:[r.h,i.k,i.h,i.e,i.a,i.g,i.c],styles:[""]}),e})()}];let F=(()=>{class e{}return e.\u0275mod=o.Hb({type:e}),e.\u0275inj=o.Gb({factory:function(t){return new(t||e)},imports:[[s.e.forChild(X)],s.e]}),e})(),N=(()=>{class e{}return e.\u0275mod=o.Hb({type:e}),e.\u0275inj=o.Gb({factory:function(t){return new(t||e)},providers:[b],imports:[[r.b,a.b,i.f,i.i]]}),e})(),j=(()=>{class e{}return e.\u0275mod=o.Hb({type:e}),e.\u0275inj=o.Gb({factory:function(t){return new(t||e)},imports:[[r.b,F,N,i.f,i.i]]}),e})()}}]);